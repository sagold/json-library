var JsonLibrary=function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){t.object=n(1),t.pointer=n(2),t.query=n(3),t.relation=n(4)},function(e,t){"use strict";function n(e){return Array.isArray(e)?e:"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).map(function(t){return e[t]}):[]}function r(e){var t;return t=Array.isArray(e)?e:"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).map(function(t){return e[t]}):null!=e?[e]:[]}function i(e){var t;if(Array.isArray(e))t=e.map(function(e,t){return t});else{if("[object Object]"===Object.prototype.toString.call(e))return Object.keys(e);t=[]}return t}function o(e,t){var n=null;return a(e,function(r){t===e[r]&&(n=r)}),n}function a(e,t){var n=Array.isArray(e)?e:Object.keys(e);n.forEach(function(n){t(n,e[n],e)})}function l(e){return JSON.parse(JSON.stringify(e))}t.values=r,t.asArray=n,t.copy=l,t.forEach=a,t.keyOf=o,t.keys=i},function(e,t,n){"use strict";t.get=n(5),t.set=n(6),t.join=n(7)},function(e,t,n){"use strict";t.query=n(8).query,t.queryGet=n(8).queryGet,t.filter=n(9)},function(e,t,n){"use strict";t.load=n(10),t.unload=n(11),t.validate=n(12),t.updatePivots=n(13)},function(e,t,n){"use strict";function r(e,t){if(null==t||null==e)return null;var n=o.stripPointerPrefix(t).split("/");return i(e,n)}function i(e,t){var n=t.shift();return n?e[n]?i(e[n],t):null:e}var o=n(14);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){if(null==t||null==e)return null;for(var r,u,s=e||{},f=a.stripPointerPrefix(t).split("/");f.length>1;)r=f.shift(),u=l.test(f[0]),s=o(s,r,u);return r=f.pop(),i(s,r,n),e}function i(e,t,n){var r,i=t.match(u);"[]"===t&&Array.isArray(e)?e.push(n):i?(r=i.pop(),e[r]=n):e[t]=n}function o(e,t,n){if(null!=e[t])return e[t];var r=n?[]:{};return i(e,t,r),r}var a=n(14),l=/^\[.*\]$/,u=/^\[(.+)\]$/;e.exports=r},function(e,t,n){"use strict";function r(){var e=Array.prototype.map.call(arguments,function(e){return i(e)});return e="#/"+e.join("/"),e.replace(/\/+/g,"/")}var i=n(14).stripPointerPrefix;e.exports=r},function(e,t,n){"use strict";function r(e,t,n){var r=[],a=i(n,r);return o(e,t,a),r}function i(e,t){switch(e){case r.ALL:return function(e,n,r){return function(n){t.push([e[n],n,e,f(r,n)])}};case r.POINTER:return function(e){return function(n){t.push(e[n])}};case r.VALUE:default:return function(e,n,r){return function(e){t.push(f(r,e))}}}}function o(e,t,n){var r=s(t);""==r[0]&&r.shift(),""==r[r.length-1]&&(r.length-=1),l(e,r,n,"#")}function a(e,t,n){return function(r){t(e[r],e,r,f(n,r))}}function l(e,t,n,r){var i,o=t.shift();0===t.length?(i=u.keys(e,o),i.forEach(a(e,n,r))):/^\*\*/.test(o)?l(e,t.slice(0),n,r):(i=u.keys(e,o),i.forEach(function(i){l(e[i],t.slice(0),n,f(r,i))})),/^\*\*/.test(o)&&(t.unshift(o),i=u.keys(e,o),i.forEach(function(i){l(e[i],t.slice(0),n,f(r,i))}))}var u=n(9),s=n(15).parsePointer,f=n(7);r.ALL="all",r.POINTER="pointer",r.VALUE="value",t.query=o,t.queryGet=r},function(e,t,n){"use strict";function r(e,t){return i(e,t).map(function(t){return e[t]})}function i(e,t){if(t){var n,r,i=t.split("?",2);if("*"===i[0]||"**"===i[0])return n=a.keys(e),n.filter(u.queryKey(e,i[1]));if(l.rIsRegExp.test(i[0]))return n=a.keys(e),r=l.convertToRegExp(i[0]),n.filter(u.queryRegExp(e,i[1],r));if(e[i[0]]&&o(e[i[0]],i[1]))return[i[0]]}return[]}function o(e,t){if(!t)return!0;for(var n,r,i,t,o=!0,a=t.replace(/(\&\&)/g,"§$1§").replace(/(\|\|)/g,"§$1§").split("§"),l=!1,u=0,f=a.length;f>u;u+=2)a[u].indexOf(":!")>-1?(i=!1,r=a[u].split(":!")):(i=!0,r=a[u].split(":")),n=r[0],r=r[1],r="undefined"===r?void 0:void 0===s[r]?r:s[r],r=i?r===e[n]:r!==e[n],o=l?o||r:o&&r,l="||"===a[u+1];return o}var a=n(1),l=n(15),u={query:function(e){return function(t){return o(t,e)}},queryKey:function(e,t){return function(n){return o(e[n],t)}},queryRegExp:function(e,t,n){return function(r){return n.test(r)?o(e[r],t):!1}}},s={"false":!1,"true":!0,"null":null};t.values=r,t.keys=i,t.valid=o},function(e,t,n){"use strict";function r(e,t){var n=new o(e,t);return i.forEach(n.parentModel,function(e){n.load(e)}),n.parentModel}var i=n(1),o=n(16);e.exports=r},function(e,t,n){"use strict";function r(e,t){var n=new o(e,t);return a(e,i.copy(t)),i.forEach(n.parentModel,function(e){n.unload(e)}),n.parentModel}var i=n(1),o=n(16),a=n(13);e.exports=r},function(e,t,n){"use strict";function r(e,t,n){if(null==e)return!1;n=n===!0;var r=e.model,o=e.references,a=(e.type||"has_one",e.foreign_key),l=e.alias,u=e.through;return t&&(r=i.get(t,r),o=i.get(t,o),u=i.get(t,u)),n&&null==u&&e.references&&(u={},i.set(t,e.through,u)),r&&o&&(a||u&&l)?!0:!1}var i=n(2);e.exports=r},function(e,t,n){"use strict";function r(e,t){function n(e){r.update(e)}var r=new o(e,t);return i.forEach(r.parentModel,n),r.model}var i=n(1),o=n(16);e.exports=r},function(e,t){"use strict";function n(e){return e.replace(/[#/]*/,"")}t.stripPointerPrefix=n},function(e,t,n){"use strict";function r(e){return new RegExp(e.replace(/^\{|\}$/g,""))}function i(e){return e=e.replace(/^\{|\/\{/g,"§{"),e=e.replace(/\}\/|\}$/g,"}§"),e.split("§")}function o(e){var t,n,r;if(e=a(e),-1===e.indexOf("{"))return e.split("/");for(r=[],t=i(e);null!=(n=t.shift());)""!==n&&(l.test(n)?r.push(n):r.push.apply(r,n.split("/")));return r}var a=n(14).stripPointerPrefix,l=/^\{.*\}$/;t.rIsRegExp=l,t.convertToRegExp=r,t.splitRegExp=i,t.parsePointer=o},function(e,t,n){"use strict";function r(e,t,n){if(t.constructor===r)return t;n=1==n;var f,c=s(t),d=u.get(e,c.model),h=u.get(e,c.references),p=u.get(e,c.through)||!1,y="has_many"===c.type,g=c.foreign_key||!1,v=c.alias||!1;if(o(c,e,!0)===!1)throw new Error("invalid relationship definition: "+JSON.stringify(t));if(n===!0&&null==p&&c.through&&(p={},u.set(e,c.references,p)),p&&v&&y)f="has_many:through:alias",g=null,i.call(this,l.throughAlias);else if(p&&v)f="has_one:through:alias",g=null,i.call(this,a.throughAlias);else if(g&&v&&y)f="has_many:foreign_key:alias",p=null,i.call(this,l.foreignKeyAlias);else if(g&&y)f="has_many:foreign_key",p=null,i.call(this,l.foreignKey);else if(g&&v)f="has_one:foreign_key:alias",p=null,i.call(this,a.foreignKeyAlias);else{if(!g)throw new Error("Positive validated definition is invalid: "+JSON.stringify(t),e);f="has_one:foreign_key",i.call(this,a.foreignKey)}this.parentModel=d,this.relatedModel=h,this.pivotModel=p,this.alias=v,this.foreignKey=g}function i(e){var t=this;Object.keys(e).forEach(function(n){t[n]=e[n]})}var o=n(12),a=n(17),l=n(18),u=(n(1),n(2)),s=(n(19),n(20));e.exports=r},function(e,t,n){"use strict";function r(e,t,n){e[t]!==n&&(e[t]=n)}function i(e,t,n){e[t]=o.keyOf(n,e[t])||e[t]}var o=n(1),a=n(2),l=n(19),u=n(19).getPrimaryKey,s={foreignKey:{load:function(e){var t=this.parentModel[e][this.foreignKey];this.relatedModel[t]&&(this.parentModel[e][this.foreignKey]=this.relatedModel[t])},unload:function(e){i(this.parentModel[e],this.foreignKey,this.relatedModel)},update:function(e){var t=a.get(this.parentModel,a.join(e,this.foreignKey));if(null!=t){var n=u(this.relatedModel,t,e);l.addTupelToRelatedModel(this.relatedModel,n,t)}}},foreignKeyAlias:{load:function(e){var t=this.parentModel[e][this.foreignKey];this.relatedModel[t]&&(this.parentModel[e][this.alias]=this.relatedModel[t])},unload:function(){var e=this.parentModel,t=this.alias,n=this.foreignKey,r=this.relatedModel;o.forEach(e,function(e,o){i(o,n,r),delete o[t]})},update:function(e){var t=this.parentModel[e],n=a.get(this.parentModel,a.join(e,this.alias));if(null!=n){var i=u(this.relatedModel,n,e);l.addTupelToRelatedModel(this.relatedModel,i,this.relatedTupel),r(t,this.foreignKey,i)}}},throughAlias:{load:function(e){var t=this.pivotModel[e];this.relatedModel[t]&&(this.parentModel[e][this.alias]=this.relatedModel[t])},unload:function(){var e=this.parentModel,t=this.alias,n=this.pivotModel;o.forEach(e,function(r){e[r][t]=n[r]})},update:function(e){var t=a.get(this.parentModel,a.join(e,this.alias)),n=this.relatedModel;if(null!=t){var i=u(n,t,e);l.addTupelToRelatedModel(n,i,t),r(this.pivotModel,e,i)}}}};e.exports=s},function(e,t,n){"use strict";function r(e,t,n){var r,i;Array.isArray(e[t])&&0!==e[t].length&&(i=[],e[t].forEach(function(e){r=o.keyOf(n,e),r&&i.push(r)}),e[t]=i)}function i(e,t,n){Array.isArray(e[t])||(e[t]=o.asArray(e[t])),-1===e[t].indexOf(n)&&e[t].push(n)}var o=n(1),a=n(2),l=n(19),u=n(19).getPrimaryKey,s={throughAlias:{load:function(e){var t=this.relatedModel;this.parentModel[e][this.alias]=this.pivotModel[e].map(function(e){return t[e]?t[e]:e})},unload:function(e){delete this.parentModel[e][this.alias]},update:function(e){var t=this.relatedModel,n=this.pivotModel,r=a.get(this.parentModel,a.join(e,this.alias));null!=r&&o.forEach(r,function(r){var o=u(t,r,e);l.addTupelToRelatedModel(t,o,r),i(n,e,o)})}},foreignKey:{load:function(e){var t=this.relatedModel,n=this.parentModel[e][this.foreignKey]||[];this.parentModel[e][this.foreignKey]=n.map(function(e){return t[e]?t[e]:e})},unload:function(e){r(this.parentModel[e],this.foreignKey,this.relatedModel)},update:function(){}},foreignKeyAlias:{load:function(e){var t=this.relatedModel;this.parentModel[e][this.alias]=this.parentModel[e][this.foreignKey].map(function(e){return t[e]?t[e]:e})},unload:function(e){delete this.parentModel[e][this.alias]},update:function(e){var t=this.parentModel[e],n=this.relatedModel,r=this.foreignKey,s=a.get(this.parentModel,a.join(e,this.alias));null!=s&&o.forEach(s,function(o){var a=u(n,o,e);l.addTupelToRelatedModel(n,a,o),i(t,r,a)})}}};e.exports=s},function(e,t,n){"use strict";function r(e,t){for(var n=0,r=t;null!=e[r];)r=t+"-"+n,n+=1;return r}function i(e,t,n){var i=l.keyOf(e,t);return null==i&&(i=t[n],i&&null===e[i]||(i=n&&null==e[n]?n:r(e,n))),i}function o(e,t,n){e.through?Array.isArray(e.through[t])?e.through[t].push(n):"[object Object]"===Object.prototype.toString.call(e.through[t])&&(e.through[t]=n):Array.isArray(e.model[t][e.foreign_key])?e.model[t][e.foreign_key].push(n):e.model[t][e.foreign_key]=n}function a(e,t,n){null==e[t]?e[t]=n:e[t]!==n}var l=n(1);t.generatePk=r,t.getPrimaryKey=i,t.addLinkToPivot=o,t.addTupelToRelatedModel=a},function(e){function t(e){var t;if("string"==typeof e){if(t=e.split(" "),e={},t.forEach(function(t){var r;-1===t.indexOf(":")?e.model=t:(r=t.split(":"),n.indexOf(r[0])>-1?(e.type=r[0],e.references=r[1]):e[r[0]]=r[1])}),null==e.on&&null==e.as)throw new Error('"as:<alias>" or "on:<foreign_key>" missing in relationship definition');if(null==e.model)throw new Error("no model defined in relationship definition");if(null==e.type)throw new Error("no related model defined in relationship definition");e.alias=e.as,delete e.as,e.foreign_key=e.on,delete e.on}return e}var n=["has_one","has_many"];e.exports=t}]);