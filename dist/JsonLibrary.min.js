var JsonLibrary=function(t){function e(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){e.object=i(1),e.json=i(2),e.pointer=i(3),e.query=i(4),e.relation=i(5)},function(t,e,i){"use strict";e.values=i(6),e.asArray=i(7),e.forEach=i(8),e.keyOf=i(9),e.keys=i(10)},function(t,e,i){"use strict";e.parse=i(11),e.stringify=i(12),e.copy=i(13)},function(t,e,i){"use strict";e.get=i(14),e.set=i(15),e["delete"]=i(16),e.join=i(17)},function(t,e,i){"use strict";function n(t,e,i){return r(t,e,i||void 0)}e.get=i(18),e.query=i(19),e["delete"]=i(20),e.filter=i(21);var r=i(18);n.ALL=r.ALL,n.POINTER=r.POINTER,n.VALUE=r.VALUE,e.queryGet=n},function(t,e,i){"use strict";e.validate=i(22),e.Relationship=i(23)},function(t){function e(t){var e;return e=Array.isArray(t)?t:"[object Object]"===Object.prototype.toString.call(t)?Object.keys(t).map(function(e){return t[e]}):null!=t?[t]:[]}t.exports=e},function(t){"use strict";function e(t){return Array.isArray(t)?t:"[object Object]"===Object.prototype.toString.call(t)?Object.keys(t).map(function(e){return t[e]}):[]}t.exports=e},function(t){"use strict";function e(t,e){Array.isArray(t)?t.forEach(e):"[object Object]"===Object.prototype.toString.call(t)&&Object.keys(t).forEach(function(i){e(t[i],i,t)})}t.exports=e},function(t,e,i){"use strict";function n(t,e){var i=null;return r(t,function(t,n){e===t&&(i=n)}),i}var r=i(8);t.exports=n},function(t){"use strict";function e(t){var e;if(Array.isArray(t))e=t.map(function(t,e){return e});else{if("[object Object]"===Object.prototype.toString.call(t))return Object.keys(t);e=[]}return e}t.exports=e},function(t,e,i){"use strict";function n(t,e){e=e||o.REFERENCE_LOCATION;var i=JSON.parse(t);return r.forEach(i[e],function(t,e){t=s.get(i,t),s.set(i,e,t)}),delete i[e],i}var r=i(1),o=i(24),s=i(3);t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){var o=t,s={};return n=n||a.REFERENCE_LOCATION,r(o,"#",s),t[n]=s,JSON.stringify(o,function(t,e){return t!==a.PROPERTY_FLAG?replace?replace.apply(null,arguments):e:void 0},i)}function r(t,e,i){s.forEach(t,function(n,r){var s=e+"/"+r;o(t,r,s,i)})}function o(t,e,i,n){null!=t[e][a.PROPERTY_FLAG]?(n[i]=t[e][a.PROPERTY_FLAG],t[e]=t[e][a.PROPERTY_FLAG]):(t[e][a.PROPERTY_FLAG]=i,r(t[e],i,n))}var s=i(1),a=i(24);t.exports=n},function(t){"use strict";function e(t){return JSON.parse(JSON.stringify(t))}t.exports=e},function(t,e,i){"use strict";function n(t,e){if(null==e||null==t)return null;var i=o.stripPointerPrefix(e).split("/");return r(t,i)}function r(t,e){var i=e.shift();return i?t[i]?r(t[i],e):null:t}var o=i(25);t.exports=n},function(t,e,i){"use strict";function n(t,e,i){if(null==e||null==t)return null;for(var n,l,u=t||{},f=s.stripPointerPrefix(e).split("/");f.length>1;)n=f.shift(),l=a.test(f[0]),u=o(u,n,l);return n=f.pop(),r(u,n,i),t}function r(t,e,i){var n,r=e.match(l);"[]"===e&&Array.isArray(t)?t.push(i):r?(n=r.pop(),t[n]=i):t[e]=i}function o(t,e,i){if(null!=t[e])return t[e];var n=i?[]:{};return r(t,e,n),n}var s=i(25),a=/^\[.*\]$/,l=/^\[(.+)\]$/;t.exports=n},function(t,e,i){"use strict";function n(t,e,i){var n=r.getParentPointer(e),a=r.getLastProperty(e),l=o(t,n)||t;return l&&delete l[a],Array.isArray(l)&&i!==!0&&s.removeUndefinedItems(l),t}var r=i(25),o=i(14),s=i(26);t.exports=n},function(t,e,i){"use strict";function n(){var t=Array.prototype.map.call(arguments,function(t){return r(t)});return t="#/"+t.join("/"),t.replace(/\/+/g,"/")}var r=i(25).stripPointerPrefix;t.exports=n},function(t,e,i){"use strict";function n(t,e,i){var n=[],s=r(i,n);return o(t,e,s),n}function r(t,e){switch(t){case n.ALL:return function(t,i,n,r){e.push([n[i],i,n,r])};case n.POINTER:return function(t,i,n,r){e.push(r)};case n.VALUE:return function(t){e.push(t)};default:return function(t){e.push(t)}}}var o=i(19);n.ALL="all",n.POINTER="pointer",n.VALUE="value",t.exports=n},function(t,e,i){"use strict";function n(t,e,i){var n=a(e);""===n[0]&&n.shift(),""===n[n.length-1]&&(n.length-=1),o(t,n,i,"#")}function r(t,e,i){return function(n){e(t[n],n,t,l(i,n))}}function o(t,e,i,n){var a,u=e.shift();0===e.length?(a=s.keys(t,u),a.forEach(r(t,i,n))):/^\*\*/.test(u)?o(t,e.slice(0),i,n):(a=s.keys(t,u),a.forEach(function(r){o(t[r],e.slice(0),i,l(n,r))})),/^\*\*/.test(u)&&(e.unshift(u),a=s.keys(t,u),a.forEach(function(r){o(t[r],e.slice(0),i,l(n,r))}))}var s=i(21),a=i(27).parsePointer,l=i(17);t.exports=n},function(t,e,i){"use strict";function n(t,e){var i=o(t,e,o.ALL);return i.forEach(function(e){r(t,e[a],!0)}),i.forEach(function(t){Array.isArray(t[l])&&s.removeUndefinedItems(t[l])}),t}var r=i(16),o=i(18),s=i(26),a=3,l=2;t.exports=n},function(t,e,i){"use strict";function n(t,e){return r(t,e).map(function(e){return t[e]})}function r(t,e){if(e){var i,n,r=e.split("?",2);if("*"===r[0]||"**"===r[0])return i=s.keys(t),i.filter(l.queryKey(t,r[1]));if(a.rIsRegExp.test(r[0]))return i=s.keys(t),n=a.convertToRegExp(r[0]),i.filter(l.queryRegExp(t,r[1],n));if(t[r[0]]&&o(t[r[0]],r[1]))return[r[0]]}return[]}function o(t,e){if(!e)return!0;for(var i,n,r,e,o=!0,s=e.replace(/(\&\&)/g,"§$1§").replace(/(\|\|)/g,"§$1§").split("§"),a=!1,l=0,f=s.length;f>l;l+=2)s[l].indexOf(":!")>-1?(r=!1,n=s[l].split(":!")):(r=!0,n=s[l].split(":")),i=n[0],n=n[1],n="undefined"===n?void 0:void 0===u[n]?n:u[n],n=r?n===t[i]:n!==t[i],o=a?o||n:o&&n,a="||"===s[l+1];return o}var s=i(1),a=i(27),l={query:function(t){return function(e){return o(e,t)}},queryKey:function(t,e){return function(i){return o(t[i],e)}},queryRegExp:function(t,e,i){return function(n){return i.test(n)?o(t[n],e):!1}}},u={"false":!1,"true":!0,"null":null};e.values=n,e.keys=r,e.valid=o},function(t,e,i){"use strict";function n(t,e,i){if(null==t)return!1;i=i===!0;var n=t.model,o=t.references,s=(t.type||"has_one",t.foreign_key),a=t.alias,l=t.through;return e&&(n=r.get(e,n),o=r.get(e,o),l=r.get(e,l)),i&&e&&(null==l&&t.through&&(l={},r.set(e,t.through,l)),null==n&&(n={},r.set(e,t.model,n)),null==o&&(o={},r.set(e,t.references,o))),n&&o&&(s||l&&a)?!0:!1}var r=i(3);t.exports=n},function(t,e,i){"use strict";function n(t,e,i){if(e.constructor===n)return e;var r=u(e),s="has_many"===r.type;if(this.parentModel=l.get(t,r.model),this.relatedModel=l.get(t,r.references),this.pivotModel=l.get(t,r.through)||!1,this.foreignKey=r.foreign_key||!1,this.alias=r.alias||!1,i=1==i,o(r,t,!0)===!1)throw new Error("invalid relationship definition: "+JSON.stringify(e));i===!0&&(this.pivotModel===!1&&r.through&&(this.pivotModel={},l.set(t,r.through,this.pivotModel)),null==this.relatedModel&&(this.relatedModel={},l.set(t,r.references,this.relatedModel)));var a=s?this.initHasMany():this.initHasOne();if(a===!1)throw new Error("Positive validated definition is invalid: "+JSON.stringify(e),t)}function r(t){var e=this;Object.keys(t).forEach(function(i){e[i]=t[i]})}var o=i(22),s=i(28),a=i(29),l=(i(1),i(3)),u=(i(30),i(31));n.prototype.initHasMany=function(){return this.id=!1,this.alias&&this.pivotModel?(this.id="has_many:through:alias",r.call(this,a.throughAlias)):this.alias&&this.foreignKey?(this.id="has_many:foreign_key:alias",r.call(this,a.foreignKeyAlias)):this.foreignKey&&(this.id="has_many:foreign_key",r.call(this,a.foreignKey)),this.id},n.prototype.initHasOne=function(){return this.id=!1,this.alias&&this.pivotModel?(this.id="has_one:through:alias",r.call(this,s.throughAlias)):this.alias&&this.foreignKey?(this.id="has_one:foreign_key:alias",r.call(this,s.foreignKeyAlias)):this.foreignKey&&(this.id="has_one:foreign_key",r.call(this,s.foreignKey)),this.id},n.prototype.loadAll=function(){for(var t=Object.keys(this.parentModel);t.length;)this.load(t.pop());return this},n.prototype.unloadAll=function(){for(var t=Object.keys(this.parentModel);t.length;)this.unload(t.pop())},n.prototype.updateAll=function(){for(var t=Object.keys(this.parentModel);t.length;)this.update(t.pop());return this},t.exports=n},function(t,e){"use strict";e.PROPERTY_FLAG="__",e.REFERENCE_LOCATION="references"},function(t,e){"use strict";function i(t){return t=t.toString(),t.replace(/[#/]*/,"")}function n(t){var e=t.match(o);return e?e.pop():null}function r(t){var e=t.match(s);return e?e.pop():t}var o=/^(.*)\/[^\/]+$/,s=/^.*\/([^\/]+)$/;e.stripPointerPrefix=i,e.getParentPointer=n,e.getLastProperty=r},function(t,e){"use strict";function i(t){for(var e=0,i=0;e+i<t.length;)void 0===t[e+i]&&(i+=1),t[e]=t[e+i],e+=1;return t.length=t.length-i,t}e.removeUndefinedItems=i},function(t,e,i){"use strict";function n(t){return new RegExp(t.replace(/^\{|\}$/g,""))}function r(t){return t=t.replace(/^\{|\/\{/g,"§{"),t=t.replace(/\}\/|\}$/g,"}§"),t.split("§")}function o(t){var e,i,n;if(t=s(t),-1===t.indexOf("{"))return t.split("/");for(n=[],e=r(t);null!=(i=e.shift());)""!==i&&(a.test(i)?n.push(i):n.push.apply(n,i.split("/")));return n}var s=i(25).stripPointerPrefix,a=/^\{.*\}$/;e.rIsRegExp=a,e.convertToRegExp=n,e.splitRegExp=r,e.parsePointer=o},function(t,e,i){"use strict";function n(t,e,i){return t=t||{},t[e]=i,t}function r(t,e,i){t[e]!==i&&(t[e]=i)}function o(t,e,i){t[e]=s.keyOf(i,t[e])||t[e]}var s=i(1),a=i(3),l=i(30),u=i(30).getPrimaryKey,f={foreignKey:{load:function(t){var e=this.parentModel[t][this.foreignKey];this.relatedModel[e]&&(this.parentModel[t][this.foreignKey]=this.relatedModel[e])},unload:function(t){o(this.parentModel[t],this.foreignKey,this.relatedModel)},update:function(t){var e=a.get(this.parentModel,a.join(t,this.foreignKey));if(null!=e){var i=u(this.relatedModel,e,t);l.addTupelToRelatedModel(this.relatedModel,i,e)}},link:function(t,e){this.parentModel[t]=n(this.parentModel[t],this.foreignKey,e),this.update(t)},unlink:function(t,e){if(this.parentModel[t]){if(e&&this.parentModel[t][this.foreignKey]!==e)return;delete this.parentModel[t][this.foreignKey],this.update(t)}}},foreignKeyAlias:{load:function(t){var e=this.parentModel[t][this.foreignKey];this.relatedModel[e]&&(this.parentModel[t][this.alias]=this.relatedModel[e])},unload:function(t){this.update(t),o(this.parentModel[t],this.foreignKey,this.relatedModel),delete this.parentModel[t][this.alias]},update:function(t){var e=this.parentModel[t],i=a.get(this.parentModel,a.join(t,this.alias));if(null!=i){var n=u(this.relatedModel,i,t);l.addTupelToRelatedModel(this.relatedModel,n,i),r(e,this.foreignKey,n)}},link:function(t,e){this.parentModel[t]=n(this.parentModel[t],this.alias,e),this.update(t)},unlink:function(t,e){if(this.parentModel[t]){if(e&&this.parentModel[t][this.alias]!==e)return;delete this.parentModel[t][this.alias],this.update(t)}}},throughAlias:{load:function(t){var e=this.pivotModel[t];this.relatedModel[e]&&(this.parentModel[t][this.alias]=this.relatedModel[e])},unload:function(t){this.update(t),delete this.parentModel[t][this.alias]},update:function(t){var e=a.get(this.parentModel,a.join(t,this.alias)),i=this.relatedModel;if(null!=e){var n=u(i,e,t);l.addTupelToRelatedModel(i,n,e),r(this.pivotModel,t,n)}},link:function(t,e){this.parentModel[t]=n(this.parentModel[t],this.alias,e),this.update(t)},unlink:function(t,e){if(this.parentModel[t]){if(e&&this.parentModel[t][this.alias]!==e)return;delete this.parentModel[t][this.alias],this.update(t)}}}};t.exports=f},function(t,e,i){"use strict";function n(t,e,i){return t=t||{},t[e]=t[e]||[],t[e].push(i),t}function r(t,e,i){var n,r;Array.isArray(t[e])&&0!==t[e].length&&(r=[],t[e].forEach(function(t){n=s.keyOf(i,t),r.push(n||t)}),t[e]=r)}function o(t,e,i){Array.isArray(t[e])||(t[e]=s.asArray(t[e])),-1===t[e].indexOf(i)&&t[e].push(i)}var s=i(1),a=i(3),l=i(30),u=i(30).getPrimaryKey,f={foreignKey:{load:function(t){var e=this.relatedModel,i=this.parentModel[t][this.foreignKey]||[];this.parentModel[t][this.foreignKey]=i.map(function(t){return e[t]?e[t]:t})},unload:function(t){r(this.parentModel[t],this.foreignKey,this.relatedModel)},update:function(t){var e=this.foreignKey,i=this.parentModel[t],n=this.relatedModel,r=i[e]||[];r.forEach(function(e){var i;r[e]||(i=s.keyOf(n,e)||u(n,e,t),n[i]=n[i]||e)})},link:function(t,e){var i=this.parentModel;i[t]=n(i[t],this.foreignKey,e),this.update(t)},unlink:function(t,e){var i,n=this.parentModel[t];n&&n[this.foreignKey]&&(i=n[this.foreignKey].indexOf(e),i>-1&&(n[this.foreignKey].splice(i,1),this.update(t)))}},foreignKeyAlias:{load:function(t){var e=this.relatedModel;this.parentModel[t][this.alias]=this.parentModel[t][this.foreignKey].map(function(t){return e[t]?e[t]:t})},unload:function(t){this.update(t),delete this.parentModel[t][this.alias]},update:function(t){var e=this.parentModel[t],i=this.relatedModel,n=this.foreignKey,r=a.get(this.parentModel,a.join(t,this.alias));null!=r&&(e[n]=[],s.forEach(r,function(r){var s=u(i,r,t);l.addTupelToRelatedModel(i,s,r),o(e,n,s)}))},link:function(t,e){var i=this.parentModel;i[t]=n(i[t],this.alias,e),this.update(t)},unlink:function(t,e){var i,n=this.parentModel[t];n&&n[this.alias]&&(i=n[this.alias].indexOf(e),i>-1&&(n[this.alias].splice(i,1),this.update(t)))}},throughAlias:{load:function(t){var e=this.relatedModel;this.parentModel[t][this.alias]=this.pivotModel[t].map(function(t){return e[t]?e[t]:t})},unload:function(t){this.update(t),delete this.parentModel[t][this.alias]},update:function(t){var e=this.relatedModel,i=this.pivotModel,n=a.get(this.parentModel,a.join(t,this.alias));null!=n&&(i[t]=[],s.forEach(n,function(n){var r=u(e,n,t);l.addTupelToRelatedModel(e,r,n),o(i,t,r)}))},link:function(t,e){var i=this.parentModel;i[t]=n(i[t],this.alias,e),this.update(t)},unlink:function(t,e){var i,n=this.parentModel[t];n&&n[this.alias]&&(i=n[this.alias].indexOf(e),i>-1&&(n[this.alias].splice(i,1),this.update(t)))}}};t.exports=f},function(t,e,i){"use strict";function n(t,e){for(var i=0,n=e;null!=t[n];)n=e+"_"+i,i+=1;return n}function r(t,e,i){var r=a.keyOf(t,e);if(null==r){if(Array.isArray(t))return t.length;r=e[i],r&&null==t[r]||(r=i&&null==t[i]?i:n(t,i))}return r}function o(t,e,i){t.through?Array.isArray(t.through[e])?t.through[e].push(i):"[object Object]"===Object.prototype.toString.call(t.through[e])&&(t.through[e]=i):Array.isArray(t.model[e][t.foreign_key])?t.model[e][t.foreign_key].push(i):t.model[e][t.foreign_key]=i}function s(t,e,i){t[e]=i||t[e]}var a=i(1);e.generatePk=n,e.getPrimaryKey=r,e.addLinkToPivot=o,e.addTupelToRelatedModel=s},function(t){"use strict";function e(t){var e;if("string"==typeof t){if(e=t.split(" "),t={},e.forEach(function(e){var n;-1===e.indexOf(":")?t.model=e:(n=e.split(":"),i.indexOf(n[0])>-1?(t.type=n[0],t.references=n[1]):t[n[0]]=n[1])}),null==t.on&&null==t.as)throw new Error('"as:<alias>" or "on:<foreign_key>" missing in relationship definition');if(null==t.model)throw new Error("no model defined in relationship definition");if(null==t.type)throw new Error("no related model defined in relationship definition");t.alias=t.as,delete t.as,t.foreign_key=t.on,delete t.on}return t}var i=["has_one","has_many"];t.exports=e}]);