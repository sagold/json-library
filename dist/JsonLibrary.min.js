var JsonLibrary=function(t){function e(r){if(i[r])return i[r].exports;var n=i[r]={exports:{},id:r,loaded:!1};return t[r].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){e.object=i(1),e.pointer=i(2),e.query=i(3),e.relation=i(4)},function(t,e){"use strict";function i(t){return Array.isArray(t)?t:"[object Object]"===Object.prototype.toString.call(t)?Object.keys(t).map(function(e){return t[e]}):[]}function r(t){var e;return e=Array.isArray(t)?t:"[object Object]"===Object.prototype.toString.call(t)?Object.keys(t).map(function(e){return t[e]}):null!=t?[t]:[]}function n(t){var e;if(Array.isArray(t))e=t.map(function(t,e){return e});else{if("[object Object]"===Object.prototype.toString.call(t))return Object.keys(t);e=[]}return e}function o(t,e){var i=null;return a(t,function(t,r){e===t&&(i=r)}),i}function a(t,e){Array.isArray(t)?t.forEach(e):Object.keys(t).forEach(function(i){e(t[i],i,t)})}function s(t){return JSON.parse(JSON.stringify(t))}e.values=r,e.asArray=i,e.copy=s,e.forEach=a,e.keyOf=o,e.keys=n},function(t,e,i){"use strict";e.get=i(5),e.set=i(6),e.join=i(7)},function(t,e,i){"use strict";e.query=i(8).query,e.queryGet=i(8).queryGet,e.filter=i(9)},function(t,e,i){"use strict";e.validate=i(10),e.Relationship=i(11)},function(t,e,i){"use strict";function r(t,e){if(null==e||null==t)return null;var i=o.stripPointerPrefix(e).split("/");return n(t,i)}function n(t,e){var i=e.shift();return i?t[i]?n(t[i],e):null:t}var o=i(12);t.exports=r},function(t,e,i){"use strict";function r(t,e,i){if(null==e||null==t)return null;for(var r,l,u=t||{},f=a.stripPointerPrefix(e).split("/");f.length>1;)r=f.shift(),l=s.test(f[0]),u=o(u,r,l);return r=f.pop(),n(u,r,i),t}function n(t,e,i){var r,n=e.match(l);"[]"===e&&Array.isArray(t)?t.push(i):n?(r=n.pop(),t[r]=i):t[e]=i}function o(t,e,i){if(null!=t[e])return t[e];var r=i?[]:{};return n(t,e,r),r}var a=i(12),s=/^\[.*\]$/,l=/^\[(.+)\]$/;t.exports=r},function(t,e,i){"use strict";function r(){var t=Array.prototype.map.call(arguments,function(t){return n(t)});return t="#/"+t.join("/"),t.replace(/\/+/g,"/")}var n=i(12).stripPointerPrefix;t.exports=r},function(t,e,i){"use strict";function r(t,e,i){var r=[],a=n(i,r);return o(t,e,a),r}function n(t,e){switch(t){case r.ALL:return function(t,i,r){return function(i){e.push([t[i],i,t,f(r,i)])}};case r.POINTER:return function(t){return function(i){e.push(t[i])}};case r.VALUE:default:return function(t,i,r){return function(t){e.push(f(r,t))}}}}function o(t,e,i){var r=u(e);""==r[0]&&r.shift(),""==r[r.length-1]&&(r.length-=1),s(t,r,i,"#")}function a(t,e,i){return function(r){e(t[r],r,t,f(i,r))}}function s(t,e,i,r){var n,o=e.shift();0===e.length?(n=l.keys(t,o),n.forEach(a(t,i,r))):/^\*\*/.test(o)?s(t,e.slice(0),i,r):(n=l.keys(t,o),n.forEach(function(n){s(t[n],e.slice(0),i,f(r,n))})),/^\*\*/.test(o)&&(e.unshift(o),n=l.keys(t,o),n.forEach(function(n){s(t[n],e.slice(0),i,f(r,n))}))}var l=i(9),u=i(13).parsePointer,f=i(7);r.ALL="all",r.POINTER="pointer",r.VALUE="value",e.query=o,e.queryGet=r},function(t,e,i){"use strict";function r(t,e){return n(t,e).map(function(e){return t[e]})}function n(t,e){if(e){var i,r,n=e.split("?",2);if("*"===n[0]||"**"===n[0])return i=a.keys(t),i.filter(l.queryKey(t,n[1]));if(s.rIsRegExp.test(n[0]))return i=a.keys(t),r=s.convertToRegExp(n[0]),i.filter(l.queryRegExp(t,n[1],r));if(t[n[0]]&&o(t[n[0]],n[1]))return[n[0]]}return[]}function o(t,e){if(!e)return!0;for(var i,r,n,e,o=!0,a=e.replace(/(\&\&)/g,"§$1§").replace(/(\|\|)/g,"§$1§").split("§"),s=!1,l=0,f=a.length;f>l;l+=2)a[l].indexOf(":!")>-1?(n=!1,r=a[l].split(":!")):(n=!0,r=a[l].split(":")),i=r[0],r=r[1],r="undefined"===r?void 0:void 0===u[r]?r:u[r],r=n?r===t[i]:r!==t[i],o=s?o||r:o&&r,s="||"===a[l+1];return o}var a=i(1),s=i(13),l={query:function(t){return function(e){return o(e,t)}},queryKey:function(t,e){return function(i){return o(t[i],e)}},queryRegExp:function(t,e,i){return function(r){return i.test(r)?o(t[r],e):!1}}},u={"false":!1,"true":!0,"null":null};e.values=r,e.keys=n,e.valid=o},function(t,e,i){"use strict";function r(t,e,i){if(null==t)return!1;i=i===!0;var r=t.model,o=t.references,a=(t.type||"has_one",t.foreign_key),s=t.alias,l=t.through;return e&&(r=n.get(e,r),o=n.get(e,o),l=n.get(e,l)),i&&e&&(null==l&&t.through&&(l={},n.set(e,t.through,l)),null==r&&(r={},n.set(e,t.model,r)),null==o&&(o={},n.set(e,t.references,o))),r&&o&&(a||l&&s)?!0:!1}var n=i(2);t.exports=r},function(t,e,i){"use strict";function r(t,e,i){if(e.constructor===r)return e;var n=u(e),a="has_many"===n.type;if(this.parentModel=l.get(t,n.model),this.relatedModel=l.get(t,n.references),this.pivotModel=l.get(t,n.through)||!1,this.foreignKey=n.foreign_key||!1,this.alias=n.alias||!1,i=1==i,o(n,t,!0)===!1)throw new Error("invalid relationship definition: "+JSON.stringify(e));i===!0&&null==pivotModel&&n.through&&(pivotModel={},l.set(t,n.references,pivotModel));var s=a?this.initHasMany():this.initHasOne();if(s===!1)throw new Error("Positive validated definition is invalid: "+JSON.stringify(e),t)}function n(t){var e=this;Object.keys(t).forEach(function(i){e[i]=t[i]})}var o=i(10),a=i(14),s=i(15),l=(i(1),i(2)),u=(i(16),i(17));r.prototype.initHasMany=function(){return this.id=!1,this.alias&&this.pivotModel?(this.id="has_many:through:alias",n.call(this,s.throughAlias)):this.alias&&this.foreignKey?(this.id="has_many:foreign_key:alias",n.call(this,s.foreignKeyAlias)):this.foreignKey&&(this.id="has_many:foreign_key",n.call(this,s.foreignKey)),this.id},r.prototype.initHasOne=function(){return this.id=!1,this.alias&&this.pivotModel?(this.id="has_one:through:alias",n.call(this,a.throughAlias)):this.alias&&this.foreignKey?(this.id="has_one:foreign_key:alias",n.call(this,a.foreignKeyAlias)):this.foreignKey&&(this.id="has_one:foreign_key",n.call(this,a.foreignKey)),this.id},r.prototype.loadAll=function(){for(var t=Object.keys(this.parentModel);t.length;)this.load(t.pop());return this},r.prototype.unloadAll=function(){for(var t=Object.keys(this.parentModel);t.length;)this.unload(t.pop())},r.prototype.updateAll=function(){for(var t=Object.keys(this.parentModel);t.length;)this.update(t.pop());return this},t.exports=r},function(t,e){"use strict";function i(t){return t=t.toString(),t.replace(/[#/]*/,"")}e.stripPointerPrefix=i},function(t,e,i){"use strict";function r(t){return new RegExp(t.replace(/^\{|\}$/g,""))}function n(t){return t=t.replace(/^\{|\/\{/g,"§{"),t=t.replace(/\}\/|\}$/g,"}§"),t.split("§")}function o(t){var e,i,r;if(t=a(t),-1===t.indexOf("{"))return t.split("/");for(r=[],e=n(t);null!=(i=e.shift());)""!==i&&(s.test(i)?r.push(i):r.push.apply(r,i.split("/")));return r}var a=i(12).stripPointerPrefix,s=/^\{.*\}$/;e.rIsRegExp=s,e.convertToRegExp=r,e.splitRegExp=n,e.parsePointer=o},function(t,e,i){"use strict";function r(t,e,i){t[e]!==i&&(t[e]=i)}function n(t,e,i){t[e]=o.keyOf(i,t[e])||t[e]}var o=i(1),a=i(2),s=i(16),l=i(16).getPrimaryKey,u={foreignKey:{load:function(t){var e=this.parentModel[t][this.foreignKey];this.relatedModel[e]&&(this.parentModel[t][this.foreignKey]=this.relatedModel[e])},unload:function(t){n(this.parentModel[t],this.foreignKey,this.relatedModel)},update:function(t){var e=a.get(this.parentModel,a.join(t,this.foreignKey));if(null!=e){var i=l(this.relatedModel,e,t);s.addTupelToRelatedModel(this.relatedModel,i,e)}}},foreignKeyAlias:{load:function(t){var e=this.parentModel[t][this.foreignKey];this.relatedModel[e]&&(this.parentModel[t][this.alias]=this.relatedModel[e])},unload:function(t){this.update(t),n(this.parentModel[t],this.foreignKey,this.relatedModel),delete this.parentModel[t][this.alias]},update:function(t){var e=this.parentModel[t],i=a.get(this.parentModel,a.join(t,this.alias));if(null!=i){var n=l(this.relatedModel,i,t);s.addTupelToRelatedModel(this.relatedModel,n,i),r(e,this.foreignKey,n)}}},throughAlias:{load:function(t){var e=this.pivotModel[t];this.relatedModel[e]&&(this.parentModel[t][this.alias]=this.relatedModel[e])},unload:function(t){this.update(t),delete this.parentModel[t][this.alias]},update:function(t){var e=a.get(this.parentModel,a.join(t,this.alias)),i=this.relatedModel;if(null!=e){var n=l(i,e,t);s.addTupelToRelatedModel(i,n,e),r(this.pivotModel,t,n)}}}};t.exports=u},function(t,e,i){"use strict";function r(t,e,i){var r,n;Array.isArray(t[e])&&0!==t[e].length&&(n=[],t[e].forEach(function(t){r=o.keyOf(i,t),n.push(r||t)}),t[e]=n)}function n(t,e,i){Array.isArray(t[e])||(t[e]=o.asArray(t[e])),-1===t[e].indexOf(i)&&t[e].push(i)}var o=i(1),a=i(2),s=i(16),l=i(16).getPrimaryKey,u={foreignKey:{load:function(t){var e=this.relatedModel,i=this.parentModel[t][this.foreignKey]||[];this.parentModel[t][this.foreignKey]=i.map(function(t){return e[t]?e[t]:t})},unload:function(t){r(this.parentModel[t],this.foreignKey,this.relatedModel)},update:function(t){var e=this.foreignKey,i=this.parentModel[t],r=this.relatedModel,n=i[e]||[];n.forEach(function(e){var i;n[e]||(i=o.keyOf(r,e)||l(r,e,t),r[i]=r[i]||e)})}},foreignKeyAlias:{load:function(t){var e=this.relatedModel;this.parentModel[t][this.alias]=this.parentModel[t][this.foreignKey].map(function(t){return e[t]?e[t]:t})},unload:function(t){this.update(t),delete this.parentModel[t][this.alias]},update:function(t){var e=this.parentModel[t],i=this.relatedModel,r=this.foreignKey,u=a.get(this.parentModel,a.join(t,this.alias));null!=u&&(e[r]=[],o.forEach(u,function(o){var a=l(i,o,t);s.addTupelToRelatedModel(i,a,o),n(e,r,a)}))}},throughAlias:{load:function(t){var e=this.relatedModel;this.parentModel[t][this.alias]=this.pivotModel[t].map(function(t){return e[t]?e[t]:t})},unload:function(t){this.update(t),delete this.parentModel[t][this.alias]},update:function(t){var e=this.relatedModel,i=this.pivotModel,r=a.get(this.parentModel,a.join(t,this.alias));null!=r&&(i[t]=[],o.forEach(r,function(r){var o=l(e,r,t);s.addTupelToRelatedModel(e,o,r),n(i,t,o)}))}}};t.exports=u},function(t,e,i){"use strict";function r(t,e){for(var i=0,r=e;null!=t[r];)r=e+"_"+i,i+=1;return r}function n(t,e,i){var n=s.keyOf(t,e);if(null==n){if(Array.isArray(t))return t.length;n=e[i],n&&null==t[n]||(n=i&&null==t[i]?i:r(t,i))}return n}function o(t,e,i){t.through?Array.isArray(t.through[e])?t.through[e].push(i):"[object Object]"===Object.prototype.toString.call(t.through[e])&&(t.through[e]=i):Array.isArray(t.model[e][t.foreign_key])?t.model[e][t.foreign_key].push(i):t.model[e][t.foreign_key]=i}function a(t,e,i){t[e]=i||t[e]}var s=i(1);e.generatePk=r,e.getPrimaryKey=n,e.addLinkToPivot=o,e.addTupelToRelatedModel=a},function(t){"use strict";function e(t){var e;if("string"==typeof t){if(e=t.split(" "),t={},e.forEach(function(e){var r;-1===e.indexOf(":")?t.model=e:(r=e.split(":"),i.indexOf(r[0])>-1?(t.type=r[0],t.references=r[1]):t[r[0]]=r[1])}),null==t.on&&null==t.as)throw new Error('"as:<alias>" or "on:<foreign_key>" missing in relationship definition');if(null==t.model)throw new Error("no model defined in relationship definition");if(null==t.type)throw new Error("no related model defined in relationship definition");t.alias=t.as,delete t.as,t.foreign_key=t.on,delete t.on}return t}var i=["has_one","has_many"];t.exports=e}]);