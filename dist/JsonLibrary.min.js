var JsonLibrary=function(e){function r(t){if(n[t])return n[t].exports;var i=n[t]={exports:{},id:t,loaded:!1};return e[t].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){r.object=n(1),r.pointer=n(2),r.query=n(3),r.relation=n(4)},function(e,r){"use strict";function n(e){return Array.isArray(e)?e:"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).map(function(r){return e[r]}):[]}function t(e){var r;return r=Array.isArray(e)?e:"[object Object]"===Object.prototype.toString.call(e)?Object.keys(e).map(function(r){return e[r]}):null!=e?[e]:[]}function i(e){var r;if(Array.isArray(e))r=e.map(function(e,r){return r});else{if("[object Object]"===Object.prototype.toString.call(e))return Object.keys(e);r=[]}return r}function a(e,r){var n=null;return o(e,function(t){r===e[t]&&(n=t)}),n}function o(e,r){var n=Array.isArray(e)?e:Object.keys(e);n.forEach(function(n){r(n,e[n],e)})}function u(e){return JSON.parse(JSON.stringify(e))}r.values=t,r.asArray=n,r.copy=u,r.forEach=o,r.keyOf=a,r.keys=i},function(e,r,n){"use strict";r.get=n(5),r.set=n(6),r.join=n(7)},function(e,r,n){"use strict";r.query=n(8).query,r.queryGet=n(8).queryGet,r.filter=n(9)},function(e,r,n){"use strict";r.load=n(10),r.unload=n(11),r.validate=n(12),r.updatePivots=n(13)},function(e,r,n){"use strict";function t(e,r){if(null==r||null==e)return null;var n=a.stripPointerPrefix(r).split("/");return i(e,n)}function i(e,r){var n=r.shift();return n?e[n]?i(e[n],r):null:e}var a=n(14);e.exports=t},function(e,r,n){"use strict";function t(e,r,n){if(null==r||null==e)return null;for(var t,s,f=e||{},l=o.stripPointerPrefix(r).split("/");l.length>1;)t=l.shift(),s=u.test(l[0]),f=a(f,t,s);return t=l.pop(),i(f,t,n),e}function i(e,r,n){var t,i=r.match(s);"[]"===r&&Array.isArray(e)?e.push(n):i?(t=i.pop(),e[t]=n):e[r]=n}function a(e,r,n){if(null!=e[r])return e[r];var t=n?[]:{};return i(e,r,t),t}var o=n(14),u=/^\[.*\]$/,s=/^\[(.+)\]$/;e.exports=t},function(e,r,n){"use strict";function t(){var e=Array.prototype.map.call(arguments,function(e){return i(e)});return e="#/"+e.join("/"),e.replace(/\/+/g,"/")}var i=n(14).stripPointerPrefix;e.exports=t},function(e,r,n){"use strict";function t(e,r,n){var t=[],o=i(n,t);return a(e,r,o),t}function i(e,r){switch(e){case t.ALL:return function(e,n,t){return function(n){r.push([e[n],n,e,l(t,n)])}};case t.POINTER:return function(e){return function(n){r.push(e[n])}};case t.VALUE:default:return function(e,n,t){return function(e){r.push(l(t,e))}}}}function a(e,r,n){var t=f(r);""==t[0]&&t.shift(),""==t[t.length-1]&&(t.length-=1),u(e,t,n,"#")}function o(e,r,n){return function(t){r(e[t],e,t,l(n,t))}}function u(e,r,n,t){var i,a=r.shift();0===r.length?(i=s.keys(e,a),i.forEach(o(e,n,t))):/^\*\*/.test(a)?u(e,r.slice(0),n,t):(i=s.keys(e,a),i.forEach(function(i){u(e[i],r.slice(0),n,l(t,i))})),/^\*\*/.test(a)&&(r.unshift(a),i=s.keys(e,a),i.forEach(function(i){u(e[i],r.slice(0),n,l(t,i))}))}var s=n(9),f=n(15).parsePointer,l=n(7);t.ALL="all",t.POINTER="pointer",t.VALUE="value",r.query=a,r.queryGet=t},function(e,r,n){"use strict";function t(e,r){return i(e,r).map(function(r){return e[r]})}function i(e,r){if(r){var n,t,i=r.split("?",2);if("*"===i[0]||"**"===i[0])return n=o.keys(e),n.filter(s.queryKey(e,i[1]));if(u.rIsRegExp.test(i[0]))return n=o.keys(e),t=u.convertToRegExp(i[0]),n.filter(s.queryRegExp(e,i[1],t));if(e[i[0]]&&a(e[i[0]],i[1]))return[i[0]]}return[]}function a(e,r){if(!r)return!0;for(var n,t,i,r,a=!0,o=r.replace(/(\&\&)/g,"§$1§").replace(/(\|\|)/g,"§$1§").split("§"),u=!1,s=0,l=o.length;l>s;s+=2)o[s].indexOf(":!")>-1?(i=!1,t=o[s].split(":!")):(i=!0,t=o[s].split(":")),n=t[0],t=t[1],t="undefined"===t?void 0:void 0===f[t]?t:f[t],t=i?t===e[n]:t!==e[n],a=u?a||t:a&&t,u="||"===o[s+1];return a}var o=n(1),u=n(15),s={query:function(e){return function(r){return a(r,e)}},queryKey:function(e,r){return function(n){return a(e[n],r)}},queryRegExp:function(e,r,n){return function(t){return n.test(t)?a(e[t],r):!1}}},f={"false":!1,"true":!0,"null":null};r.values=t,r.keys=i,r.valid=a},function(e,r,n){"use strict";function t(e,r){var n,t=u(r,e);if(null==t)throw Error("invalid relationModel\n: "+JSON.stringify(r));switch(n=t.model,t.type){case"has_many:through:alias":o.forEach(t.pivot,function(e,r){i(n[e],t.alias,r,t.relatedModel)});break;case"has_many:foreign_key:alias":o.forEach(n,function(e,r){i(r,t.alias,r[t.foreign_key],t.relatedModel)});break;case"has_many:foreign_key":o.forEach(n,function(e,r){i(r,t.foreign_key,r[t.foreign_key],t.relatedModel)});break;case"has_one:through:alias":o.forEach(t.pivot,function(e,r){a(n[e],t.alias,r,t.relatedModel)});break;case"has_one:foreign_key:alias":o.forEach(n,function(e,r){a(r,t.alias,r[t.foreign_key],t.relatedModel)});break;case"has_one:foreign_key":o.forEach(n,function(e,r){a(r,t.foreign_key,r[t.foreign_key],t.relatedModel)});break;default:throw new Error("Unknown relationship type: "+t.type)}return n}function i(e,r,n,t){var i;e[r]=[];for(var a=0,o=n.length;o>a;a+=1)i=t[n[a]],e[r].push(i)}function a(e,r,n,t){e[r]=t[n]}var o=n(1),u=n(16);e.exports=t},function(e,r,n){"use strict";function t(e,r){var n,t=s(o.copy(r),e);switch(u(e,o.copy(r)),n=t.model,t.type){case"has_many:through:alias":o.forEach(n,function(e){delete n[e][t.alias]});break;case"has_many:foreign_key:alias":o.forEach(n,function(e,r){delete r[t.alias]});break;case"has_many:foreign_key":o.forEach(n,function(e){i(n[e],t.foreign_key,t.relatedModel)});break;case"has_one:through:alias":o.forEach(n,function(e){n[e][t.alias]=t.pivot[e]});break;case"has_one:foreign_key:alias":o.forEach(n,function(e,r){a(r,t.foreign_key,t.relatedModel),delete r[t.alias]});break;case"has_one:foreign_key":o.forEach(n,function(e,r){a(r,t.foreign_key,t.relatedModel)});break;default:throw new Error("Unknown relationship type: "+t.type)}return n}function i(e,r,n){var t,i;Array.isArray(e[r])&&0!==e[r].length&&(i=[],e[r].forEach(function(e){t=o.keyOf(n,e),t&&i.push(t)}),e[r]=i)}function a(e,r,n){e[r]=o.keyOf(n,e[r])}var o=n(1),u=n(13),s=n(16);e.exports=t},function(e,r,n){"use strict";function t(e,r){if(null==e)return!1;var n=e.model,t=e.references,a=(e.type||"has_one",e.foreign_key),o=e.alias,u=e.through;return r&&(n=i.get(r,n),t=i.get(r,t),u=i.get(r,u)),n&&t&&(a||u&&o)?!0:!1}var i=n(2);e.exports=t},function(e,r,n){"use strict";function t(e,r,n){var t,l=f(r,e);switch(t=l.model,l.type){case"has_many:through:alias":u.forEach(t,function(e,r){r[l.alias]&&u.forEach(r[l.alias],function(r){var n=s(l.relatedModel,r,e);o(l.relatedModel,n,r),a(l.pivot,e,n)})});break;case"has_many:foreign_key:alias":u.forEach(t,function(e,r){r[l.alias]&&u.forEach(r[l.alias],function(n){var t=s(l.relatedModel,n,e);o(l.relatedModel,t,n),a(r,l.foreign_key,t)})});break;case"has_many:foreign_key":break;case"has_one:through:alias":u.forEach(t,function(e){if(null!=t[e][l.alias]){var r=s(l.relatedModel,t[e][l.alias],e);o(l.relatedModel,r,t[e][l.alias]),i(l.pivot,e,r)}});break;case"has_one:foreign_key:alias":u.forEach(t,function(e){if(null!=t[e][l.alias]){var r=s(l.relatedModel,t[e][l.alias],e);o(l.relatedModel,r,t[e][l.alias]),i(t[e],l.foreign_key,r)}});break;case"has_one:foreign_key":u.forEach(t,function(e){if(null!=t[e][l.foreign_key]){var r=s(l.relatedModel,t[e][l.foreign_key],e);o(l.relatedModel,r,t[e][l.foreign_key])}});break;default:throw new Error("Unknown relationship type: "+l.type)}return t}function i(e,r,n){e[r]!==n&&(e[r]=n)}function a(e,r,n){Array.isArray(e[r])||(e[r]=u.asArray(e[r])),-1===e[r].indexOf(n)&&e[r].push(n)}function o(e,r,n){null==e[r]?e[r]=n:e[r]!==n}var u=n(1),s=n(17).getPrimaryKey,f=n(16);e.exports=t},function(e,r){"use strict";function n(e){return e.replace(/[#/]*/,"")}r.stripPointerPrefix=n},function(e,r,n){"use strict";function t(e){return new RegExp(e.replace(/^\{|\}$/g,""))}function i(e){return e=e.replace(/^\{|\/\{/g,"§{"),e=e.replace(/\}\/|\}$/g,"}§"),e.split("§")}function a(e){var r,n,t;if(e=o(e),-1===e.indexOf("{"))return e.split("/");for(t=[],r=i(e);null!=(n=r.shift());)""!==n&&(u.test(n)?t.push(n):t.push.apply(t,n.split("/")));return t}var o=n(14).stripPointerPrefix,u=/^\{.*\}$/;r.rIsRegExp=u,r.convertToRegExp=t,r.splitRegExp=i,r.parsePointer=a},function(e,r,n){"use strict";function t(e,r){e=o(e);var n={valid:i(e,r),model:a.get(r,e.model),relatedModel:a.get(r,e.references),type:e.type||"has_one",foreign_key:e.foreign_key,pivot:a.get(r,e.through),alias:e.alias};if(n.valid===!1)return null;if(n.pivot&&n.alias&&"has_many"===n.type)n.type="has_many:through:alias",n.foreign_key=null;else if(n.pivot&&n.alias)n.type="has_one:through:alias",n.foreign_key=null;else if(n.foreign_key&&n.alias&&"has_many"===n.type)n.type="has_many:foreign_key:alias",n.pivot=null;else if(n.foreign_key&&"has_many"===n.type)n.type="has_many:foreign_key",n.pivot=null;else if(n.foreign_key&&n.alias)n.type="has_one:foreign_key:alias",n.pivot=null;else{if(!n.foreign_key)throw new Error("Positive validated definition is invalid",e,r);n.type="has_one:foreign_key"}return n}var i=n(12),a=n(2),o=n(18);e.exports=t},function(e,r,n){"use strict";function t(e,r){for(var n=0,t=r;null!=e[t];)t=r+"-"+n,n+=1;return t}function i(e,r,n){var i=a.keyOf(e,r);return null==i&&(i=r[n],i&&null===e[i]||(i=n&&null==e[n]?n:t(e,n))),i}var a=n(1);r.generatePk=t,r.getPrimaryKey=i},function(e){function r(e){var r;if("string"==typeof e){if(r=e.split(" "),e={},r.forEach(function(r){var t;-1===r.indexOf(":")?e.model=r:(t=r.split(":"),n.indexOf(t[0])>-1?(e.type=t[0],e.references=t[1]):e[t[0]]=t[1])}),null==e.on&&null==e.as)throw new Error('"as:<alias>" or "on:<foreign_key>" missing in relationship definition');if(null==e.model)throw new Error("no model defined in relationship definition");if(null==e.type)throw new Error("no related model defined in relationship definition");e.alias=e.as,delete e.as,e.foreign_key=e.on,delete e.on}return e}var n=["has_one","has_many"];e.exports=r}]);